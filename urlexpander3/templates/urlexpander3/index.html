<!doctype html>
<html>
<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>URL expander</title>
</head>

<body>
    <div class="container-fluid">
        <h1>Please enter a URL to expand</h1>
        <form class="form-horizontal" action="{% url 'expand' %}" method="POST">
            {% csrf_token %}
            <div class="form-group">
                <div class="col-md-4">
                    <input type="text" type="text" name="shorter_url" value="{{ invalid_url }}">
                    <input type="submit" name="submit" value="Submit"/>
                </div>
            </div>
        </form>
        {% if invalid_url %}
        <b>Hmmm.... Doesn't seem like a valid URL address</b>
        <br/>
        {% endif %}
        <!-- <a class="button" href="{% url 'logout' %}"><button>Logout</button></a> -->
        <br />
        {% if url_list %}
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Short URL</th>
                        <th>Full URL</th>
                        <th>HTTP status</th>
                        <th>Page title</th>
                        <th>Wayback URL</th>
                        <th>Wayback timestamp</th>
                        <th>Created</th>
                        <th>Updated</th>
                        <th>Expires</th>
                        <th>Registrant Name</th>
                        <th>Organization</th>
                        <th>Street</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Postal Code</th>
                        <th>Country</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Fax</th>
                        <th>Domain Name</th>
                        <th>Screenshot</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                {% for url_detail in url_list %}
                <tbody>
                    <tr>
                        <td>{{url_detail.short_url}}</td>
                        <td>{{url_detail.full_url}}</td>
                        <td>{{url_detail.http_status}}</td>
                        <td>{{url_detail.page_title}}</td>
                        {% if url_detail.wayback_url == 'N/A' %}
                        <td>{{url_detail.wayback_url}}</td>
                        {% else %}
                        <td><a href="{{url_detail.wayback_url}}" target="_blank">{{url_detail.wayback_url}}</a></td>
                        {% endif %}
                        <td>{{url_detail.timestamp}}</td>
                        <td>{{url_detail.created_date}}</td>
                        <td>{{url_detail.updated_date}}</td>
                        <td>{{url_detail.expires_date}}</td>
                        <td>{{url_detail.name}}</td>
                        <td>{{url_detail.organization}}</td>
                        <td>{{url_detail.street1}}</td>
                        <td>{{url_detail.city}}</td>
                        <td>{{url_detail.state}}</td>
                        <td>{{url_detail.postal_code}}</td>
                        <td>{{url_detail.country}}</td>
                        <td>{{url_detail.email}}</td>
                        <td>{{url_detail.telephone}}</td>
                        <td>{{url_detail.fax}}</td>
                        <td>{{url_detail.domain_name}}</td>
                        {% if url_detail.image == 'N/A' %}
                        <td>{{url_detail.image}}</td>
                        {% else %}
                        <td><a href="https://s3.amazonaws.com/info344lab3/{{url_detail.image}}" target="_blank">{{url_detail.image}}</a></td>
                        {% endif %}
                        <td><a href="{% url 'delete' url_detail.pk %}">Delete</a></td>
                    </tr>
                </tbody>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    </div>
</body>
</html>
